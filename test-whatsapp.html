<!DOCTYPE html>
<html>
<head>
  <title>Test WhatsApp Actualizaci√≥n</title>
  <style>
    body { font-family: monospace; padding: 20px; }
    .item { background: #f0f0f0; padding: 10px; margin: 10px 0; border-radius: 4px; }
    .ok { border-left: 4px solid #4caf50; }
    .error { border-left: 4px solid #f44336; }
  </style>
</head>
<body>
  <h1>Test: Actualizaci√≥n de WhatsApp URLs</h1>

  <h3>Botones en HTML:</h3>
  <p><a id="cta-hero" href="#contacto">Bot√≥n Hero (debe cambiar a WhatsApp)</a></p>
  <p><a id="cta-header" href="#contacto">Bot√≥n Header (debe cambiar a WhatsApp)</a></p>
  <p><a id="whatsapp-fab" href="#contacto">Bot√≥n FAB (debe cambiar a WhatsApp)</a></p>

  <h3>Estado despu√©s de ejecutar updateWhatsAppLinks:</h3>
  <div id="status" class="item"></div>

  <script>
    // Simular updateWhatsAppLinks
    function updateWhatsAppLinks(config) {
      const whatsapp = config.whatsapp;
      if (!whatsapp || !whatsapp.number) {
        console.error('‚ùå No hay whatsapp.number');
        return;
      }

      const digits = whatsapp.number.replace(/\D+/g, '');
      const message = encodeURIComponent(whatsapp.message || 'Hola');
      const waUrl = `https://wa.me/${digits}?text=${message}`;
      
      console.log('üìû WhatsApp URL:', waUrl);

      ['cta-hero', 'cta-header', 'whatsapp-fab'].forEach(id => {
        const btn = document.getElementById(id);
        if (btn) {
          btn.href = waUrl;
          btn.target = '_blank';
          btn.rel = 'noopener';
          console.log(`‚úÖ ${id} actualizado`);
        }
      });
    }

    // Cargar config.json y actualizar
    fetch('config.json')
      .then(r => r.json())
      .then(config => {
        console.log('Config cargado:', config);
        updateWhatsAppLinks(config);
        
        // Mostrar estado
        const html = `
          <div class="ok">
            <strong>‚úÖ Actualizaci√≥n exitosa</strong>
            <p>WhatsApp URL: <code>${config.whatsapp.number}</code></p>
            <p><a id="test-link" href="#" target="_blank">Haz click aqu√≠ para probar WhatsApp (debe abrir en nueva pesta√±a)</a></p>
          </div>
        `;
        
        const status = document.getElementById('status');
        status.innerHTML = html;
        
        // Actualizar el link de prueba
        const digits = config.whatsapp.number.replace(/\D+/g, '');
        const message = encodeURIComponent(config.whatsapp.message || 'Hola');
        const waUrl = `https://wa.me/${digits}?text=${message}`;
        document.getElementById('test-link').href = waUrl;
      })
      .catch(err => {
        const status = document.getElementById('status');
        status.className = 'item error';
        status.innerHTML = `<strong>‚ùå Error:</strong> ${err.message}`;
      });
  </script>
</body>
</html>
